.admin
  .report
    %h4
      = "Current Users: #{Person.count}"
    %p.users_count
      %h6
        = "#{Person.where(:provider => 'weibo').count} signed in with weibo"
      %h6
        = "#{Person.where(:provider => 'twitter').count} signed in with twitter"
      %h6
        = "#{Person.where(:provider => 'facebook').count} signed in with facebook"
  
  .report
    %h4
      Courses
    %h5
      = "ALL Time Top 10 Courses View:"
    %p.courses_view
      %h6
        - Course.top(10).each do |course|
          - if course
            = "#{course.name(I18n.locale)} hits: #{course.score.to_s}"
          %br
        
    %h5
      = "Today's Top 10 Courses View:"
    %p.courses_view
      %h6
        - Course.today_top(10).each do |course|
          = "#{course.name(I18n.locale)} hits: #{course.daily_score.to_s}"
          %br
        
    %h5
      = "This Week's Top 10 Courses View:"
    %p.courses_view
      %h6
        - Course.week_top(10).each do |course|
          - if course
            = "#{course.name(I18n.locale)} hits: #{course.weekly_score.to_s}"
          %br
    %h5
      = "ALL Time Top 10 Courses Category View:"
    %p.courses_categories_view
      %h6
        - Course.courses_category_top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.score.to_s}"
          %br

    %h5
      = "Today's Top 10 Courses Category View:"
    %p.courses_categories_view
      %h6
        - Course.courses_category_today_top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.daily_score.to_s}"
          %br

    %h5
      = "This Week's Top 10 Courses Category View:"
    %p.courses_categories_view
      %h6
        - Course.courses_category_week_top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.weekly_score.to_s}"
          %br
        
  .report
    %h4
      Categories
    %h5
      = "ALL Time Top 10 Categories View:"
    %p.categories_view
      %h6
        - Category.top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.score.to_s}"
          %br

    %h5
      = "Today's Top 10 Courses View:"
    %p.categories_view
      %h6
        - Category.today_top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.daily_score.to_s}"
          %br

    %h5
      = "This Week's Top 10 Courses View:"
    %p.categories_view
      %h6
        - Category.week_top(10).each do |category|
          - if category
            = "#{category.name(I18n.locale)} hits: #{category.weekly_score.to_s}"
          %br      

  .report
    %h4
      Signed up users
    - Person.all(:include => [:enrolled_courses, :watching_courses]).each do |p| 
      = "name: #{p.name}  email: #{p.email} enrolled courses id: #{ p.enrolled_courses.map{|e|e.id}.join(", ")} watched courses id: #{ p.watching_courses.map{|e|e.id}.join(", ")}"
      %br

  .report
    %h4
      Courses
    - Course.all.each do |c|
      = c.name(I18n.locale)
      %br
      %h6
        watch
      = "#{c.watchers.map{|w| w.email || w.name ||ï½—.id }.join(', ')}"
      %h6
        enroll
      = "#{c.students.map{|s| s.email || s.name ||s.id }.join(', ')}"
      %br
      %br
      %br
    
  